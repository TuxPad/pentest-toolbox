import argparse
import requests
import sys

# Arguments
parser = argparse.ArgumentParser()
parser.add_argument("-f", "--file", required=True, help="File of payloads to be used")
parser.add_argument("-H", "--header", help="Add custom header")
parser.add_argument("-o", "--output", help="Save output to file")
parser.add_argument("-u", "--URL",required=True, help="https://url.to.site/to/be/fuzzed")
parser.add_argument("-v", "--version", action="version", version="tfuzz version: 0.1", help="Show program's version number and exit.")

args = parser.parse_args()
payloads = []

# Read in payloads to a list
try:
    with open(args.file, 'r') as file:
        for line in file:
            payloads.append(line.strip())
except FileNotFoundError:
    sys.exit("Payload file not found")

def main():
    if args.header:
        print(args.header)
    elif args.file:
        print("Payloads: ")
        print(args.file)
    
    for payload in payloads:
        print(f"{args.URL.replace('FUZZ',payload)}")
   
    print(payloads)


if __name__ == "__main__":
    main()
